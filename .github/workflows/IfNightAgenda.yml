name: Agendamento Noturno

on:
  schedule:
    # Executa automaticamente das 22h Ã s 23h (horÃ¡rio de BrasÃ­lia â†’ 01hâ€“02h UTC)
    - cron: '0 1-2 * * *'
    # Executa automaticamente da meia-noite Ã s 5h (horÃ¡rio de BrasÃ­lia â†’ 03hâ€“08h UTC)
    - cron: '0 3-8 * * *'
  workflow_dispatch: # Permite rodar manualmente

jobs:
  exemplo-noite:
    runs-on: ubuntu-latest

    steps:
      - name: Verificar horÃ¡rio (somente 22hâ€“5h de BrasÃ­lia)
        id: verificar
        run: |
          HORA_BR=$(TZ='America/Sao_Paulo' date +%H)
          echo "ğŸ• Hora atual no Brasil: $HORA_BR"
          
          # Verifica se estÃ¡ entre 22h (22, 23, 00, 01, 02, 03, 04, 05)
          if [ $HORA_BR -ge 22 ] || [ $HORA_BR -lt 6 ]; then
            echo "âœ… Dentro do horÃ¡rio permitido (noite)."
          else
            echo "âŒ Fora do horÃ¡rio permitido (22hâ€“5h no Brasil)."
            exit 1
          fi

      - name: Executar aÃ§Ã£o noturna
        run: |
          echo "ğŸŒ™ Executando aÃ§Ã£o noturna..."
          echo "ğŸ• HorÃ¡rio atual (BrasÃ­lia): $(TZ='America/Sao_Paulo' date)"
          echo "ğŸ•’ HorÃ¡rio UTC: $(date -u)"
