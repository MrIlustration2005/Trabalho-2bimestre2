name: Agendamento Noturno

on:
  schedule:
    # Executa automaticamente das 22h √†s 23h (hor√°rio de Bras√≠lia ‚Üí 01h‚Äì02h UTC)
    - cron: '0 1-2 * * *'
    # Executa automaticamente da meia-noite √†s 5h (hor√°rio de Bras√≠lia ‚Üí 03h‚Äì08h UTC)
    - cron: '0 3-8 * * *'
  workflow_dispatch: # Permite rodar manualmente

jobs:
  exemplo-noite:
    runs-on: ubuntu-latest

    steps:
      - name: Verificar hor√°rio (somente 22h‚Äì5h de Bras√≠lia)
        id: verificar
        run: |
          HORA_BR=$(TZ='America/Sao_Paulo' date +%H)
          echo " Hora atual no Brasil: $HORA_BR"
          
          # Verifica se est√° entre 22h (22, 23, 00, 01, 02, 03, 04, 05)
          if [ $HORA_BR -ge 22 ] || [ $HORA_BR -lt 6 ]; then
            echo " Dentro do hor√°rio permitido (noite)."
          else
            echo " Fora do hor√°rio permitido (22h‚Äì5h no Brasil)."
            exit 1
          fi

      - name: Executar a√ß√£o noturna
        run: |
          echo "üåô Executando a√ß√£o noturna..."
          echo "üïê Hor√°rio atual (Bras√≠lia): $(TZ='America/Sao_Paulo' date)"
          echo "üïí Hor√°rio UTC: $(date -u)"
